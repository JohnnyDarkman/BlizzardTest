window.application=new Application(document),window.application.viewmodel("root",["route","http",function(a,b){a.register("","application/views/search.html"),a.register("profile","application/views/profile.html"),a.register("question","application/views/question.html");var c=this;c.throttled=!1,c.hours="forever",b.setGlobalParam("key","t3poiH*IHytdvd1sU5nGkw(("),b.get("https://api.stackexchange.com/info",{site:"stackoverflow"},function(){c.throttled=!1},function(){if(400===this.status){c.throttled=!0;try{var a=JSON.parse(this.responseText),b=a.error_message.match(/\d+(?= seconds$)/i)[0];c.hours=Math.round(parseInt(b)/60/60*100)/100}catch(d){c.hours="several"}}})}]),window.application.register.perApp("auth",["broadcast","utilities","http",function(a,b,c){function d(b){var c={token:b.accessToken,expires:b.expirationDate};localStorage.auth=JSON.stringify(c),a.send(e.channel)}var e=this;e.channel="Auth.Updated";var f=(window.location.href||"").replace(/\#.*$/g,"").replace(/\/[^\/]+\.[^\/]+$/g,"").replace(/\/application\.*$/g,"")+"/application/proxy.html";SE.init({clientId:4573,key:"t3poiH*IHytdvd1sU5nGkw((",channelUrl:f,complete:function(a){}}),b.readonly(e,"info",function(){var a=JSON.parse(localStorage.auth||"{}");return"expires"in a&&(a.expires=new Date(a.expires)),a}),b.readonly(e,"authenticated",function(){var a=e.info;return!!(a.token&&a.expires&&a.expires>new Date)}),e.login=function(){SE.authenticate({networkUsers:!0,scope:[],success:function(a){d(a)},error:function(){d({})}})},e.logout=function(){e.authenticated&&c.get("https://api.stackexchange.com/2.2/apps/"+e.info.token+"/de-authenticate",function(){d({})},function(){d({})})},Object.freeze(e)}]),window.application.register.perApp("search",["http","html","route","utilities","broadcast",function(a,b,c,d,e){function f(a){k.intitle=a.data.query||"",k.sort=a.data.sort||"activity",k.tagged=a.data.tags||""}function g(a){if(!a)return"https://api.stackexchange.com/tags";var b="https://api.stackexchange.com/tags/";for(var c in a)b=b+encodeURIComponent(c)+";";return b=b.replace(/;$/g,""),b+="/info"}function h(b){for(var d={},f=0;f<b.length;f++){var h=b[f];h.cappslink=function(a){return function(){c.navigate("question",{id:a})}}(h.question_id),h.owner.accept_rate||(h.owner.accept_rate="n/a");for(var i=0;h.tags&&i<h.tags.length;i++)h.tags[i]={value:h.tags[i],link:function(a){return function(b){b.stopPropagation(),c.navigate("",{query:k.intitle,sort:k.sort,tags:a})}}(h.tags[i])},d[h.tags[i].value]=!0}a.get(b.length?g(d):g(),{order:b.length?"asc":"desc",sort:b.length?"name":"popular",site:"stackoverflow",filter:"!-.G.68phH_FI",pagesize:40},function(a){for(var b=0;b<a.items.length;b++)m=m.filter(function(c){return c.name!==a.items[b].name}),m.push(a.items[b]);e.send(j.channel)},function(){e.send(j.channel)});for(var f=0;f<b.length;f++)l.push(b[f])}function i(){return k.intitle||k.tagged?void a.get("https://api.stackexchange.com/search",k,function(a){return a&&a.items&&a.items.length?(n=a.has_more||!1,void h(a.items)):(n=!1,void h([]))},function(){n=!1,h([])}):(n=!1,void h([]))}var j=this;j.channel="Search.Updated";var k={intitle:"",sort:"activity",tagged:"",page:1,pagesize:10,site:"stackoverflow",order:"desc"},l=[];d.readonly(j,"results",function(){return d.toarray(l)});var m=[];d.readonly(j,"tags",function(){return d.toarray(m)});var n=!1;d.readonly(j,"hasmore",function(){return n}),j.loadmore=function(){n&&(k.page++,i())},c.subscribe(function(a){k.page=1,f(a),l=[],m=[],i()},""),c.current.uri||(f(c.current),i()),Object.freeze(j)}]),window.application.viewmodel("auth",["view","http","auth",function(a,b,c){function d(){var a=c.info;e.authenticated=c.authenticated,e.expires=a.expires||!1,e.token=a.token||!1}var e=this;e.authenticated=!1,e.expires=!1,e.token=!1,a.listen(c.channel,d),d(),e.login=function(){c.login()},e.logout=function(){c.logout()}}]),window.application.viewmodel("search",["view","html","route","search","auth",function(a,b,c,d,e){function f(){g.results=d.results||[],g.query=c.current.data.query||"",g.sort=c.current.data.sort||"activity",g.searchtags=c.current.data.tags||"",g.hasmore=!1,g.tags=d.tags||[],setTimeout(function(){g.hasmore=d.hasmore},500)}var g=this;g.results=d.results,g.query="",g.sort="activity",g.searchtags="",g.tags=[],g.hasmore=!1,a.listen(d.channel,f),f(),g.search=function(){var a=b.formatParameters({query:g.query,sort:g.sort,tags:g.searchtags});c.navigate("","?"+a)},g.next=function(){g.hasmore&&(g.hasmore=!1,d.loadmore())},g.authenticated=e.authenticated,a.listen(e.channel,function(){g.authenticated=e.authenticated}),g.fav=function(a){a.preventDefault(),a.stopPropagation(),alert("This feature not implemented because it would be disruptive to live data (please see code).")},g.upvote=function(a){a.stopPropagation(),a.preventDefault(),alert("feature not implemented because it would be disruptive to live data (please see code).")},g.downvote=function(a){a.stopPropagation(),a.preventDefault(),alert("feature not implemented because it would be disruptive to live data (please see code).")}}]),window.application.viewmodel("question",["view","route","http","html","auth",function(a,b,c,d,e){var f=this;f.data={},f.answers=[],f.authenticated=e.authenticated,a.listen(e.channel,function(){f.authenticated=e.authenticated}),f.fav=function(a){a.preventDefault(),a.stopPropagation(),alert("This feature not implemented because it would be disruptive to live data (please see code).")},f.upvote=function(a){a.stopPropagation(),a.preventDefault(),alert("feature not implemented because it would be disruptive to live data (please see code).")},f.downvote=function(a){a.stopPropagation(),a.preventDefault(),alert("feature not implemented because it would be disruptive to live data (please see code).")};b.current;c.get("https://api.stackexchange.com/questions/"+b.current.data.id,{order:"desc",sort:"activity",site:"stackoverflow",filter:"!L_Zm1rmoFy**bp.d27d-ZJ"},function(a){if(f.data=a.items[0],f.data.answers&&f.data.answers.length){for(var b=[],d=0;d<f.data.answers.length;d++)b.push(f.data.answers[d].answer_id);c.get("https://api.stackexchange.com/answers/"+b.join(";"),{order:"desc",sort:"activity",site:"stackoverflow",filter:"!1zSsisdDRFlWF2g_cxdSy"},function(a){f.answers=a.items})}})}]),window.application.viewmodel("profile",["view","http","auth","route",function(a,b,c,d){function e(a){var b=new Date(1e3*a),c=""+b.getMonth()+"/"+b.getDate()+"/"+b.getYear()%100+" "+(b.getHours()%12||12)+":"+b.getMinutes()+" "+(b.getHours()>11?"pm":"am");return c.replace(/\b(\d)(?!\d+)/g,"0$1")}var f=this;f.userless=!1,f.user={},f.answers=[],f.badges=[],f.tags=[],a.listen(c.channel,function(){c.authenticated||d.navigate("")}),b.setParam("access_token",c.info.token),b.setParam("site","stackoverflow"),b.get("https://api.stackexchange.com/me",{order:"desc",sort:"reputation",filter:"!)sjdGQOAfl.okknbe0u3"},function(a){var b=a.items[0];f.userless=!b,f.userless||(b.creation_date=e(b.creation_date),f.user=b)}),b.get("https://api.stackexchange.com/me/tags",{order:"asc",sort:"name",filter:"!-.G.68phH_FI"},function(a){f.tags=a.items}),b.get("https://api.stackexchange.com/me/badges",{order:"asc",sort:"rank",filter:"!SWKA(oWp7_Kp)zbUAU"},function(a){f.badges=a.items}),b.get("https://api.stackexchange.com/me/answers",{order:"desc",sort:"activity",filter:"!7gohVUNU(8KPtsp85qewC*Q_lGt)7g*HaB"},function(a){for(var b=0;b<a.items.length;b++){var c=a.items[b];c.last_activity_date=e(c.last_activity_date),c.creation_date=e(c.creation_date),c.last_edit_date=c.last_edit_date?e(c.last_edit_date):"N/A"}f.answers=a.items})}]),window.application.viewmodel("tag-cloud",["viewmodel",function(a){function b(){for(var b=[],d=0,e=0;e<a.tags.length;e++)b.push({count:a.tags[e].count,name:a.tags[e].name,link:"#?tags="+encodeURIComponent(a.tags[e].name)}),d=Math.max(a.tags[e].count,d);for(var e=0;e<b.length;e++)b[e].strength="strength-"+Math.round(b[e].count/d*10);c.tags=b}if("tags"in a){var c=this;c.tags=[],a.watch("tags",b),b()}}]);